# 排查会接口文档

## 目录

- [外部提供接口](#外部提供接口)
- [对外提供接口](#对外提供接口)

## 外部提供接口

1. 添加未上会线索查询接口

        POST:http://ip:port/api/pchjs/selectDtjXsInfo

    支持自定义查询


    <details><summary>请求体</summary>

    ```json
    {
        "cBjbr":"",
        "cZj":"",
        "cDw":"",
        "deptid":"",
        "xspchid":"",
        "qp":"",
        "cbr":""
    }
    ```
    </details>

    <details><summary>响应体</summary>

    ```json
    {
        "code": 1,
        "data": {
            "total": 16,
            "data": [
                {
                    "cCzly": "",
                    "cBh": "1468EDF04F813CE6683A4E6EFFB479EF",
                    "arrXsly": "",
                    "cFyzywt": "",
                    "cCbr": "1915582441",
                    "cAjbs": "bfc7014e211270bef               "
                },
                {
                    "cCzly": "aaaaaaa",
                    "cBh": "CB36B03B307045B2AD26E73F56A684C3",
                    "cBjbr": "aaaaaaaaa",
                    "cCzjy": "立案审查调查",
                    "arrXsly": "审查调查中发现",
                    "cFyzywt": "aaaaaaaaaaaaaaa",
                    "cAjbs": "31653c7cd033d50589ce01313441774d"
                }
            ],
            "offset": 0,
            "limit": 10,
            "customData": {}
        },
        "message": "成功"
    }
    ```
    </details>

2. 排查会请求推送上会线索

        POST:http://ip:port/api/pchjs/updateXsInfoList
    
    <details><summary>请求体</summary>

    ```json
    {
        "shxsList": [
            {
            "arrXsly": [
                "信访举报"
            ],
            "cAjbs": "8B59C792DC6249358D37F5C3AE2121C9",
            "cBh": "D887AA1924084CFD944BD50A0681C718",
            "cBjbr": "家务伶伶",
            "cCbr": "驻省委办公厅办案人员2",
            "cCzjy": "转办",
            "cCzly": "发发发",
            "cDw": "华北电力测试",
            "cFyzywt": "失职渎职",
            "cXspchBh": "a2978e7686aa0a47feadb6a0e9397155",
            "cZj": "正局级",
            "cZw": "某室主任",
            "fetchFields": {}
            },
            {
            "arrXsly": [
                "监督检查中发现"
            ],
            "cAjbs": "4028717811BE6FB7DD1BC376A28DDACB",
            "cBh": "DB5DB0F9B266DD7C1650CB8E093F3E4C",
            "cBjbr": "水电费",
            "cCbr": "驻省委办公厅组长",
            "cCzly": "",
            "cDw": "士大夫",
            "cFyzywt": "",
            "cXspchBh": "a2978e7686aa0a47feadb6a0e9397155",
            "cZj": "副局级",
            "cZw": "上dfa",
            "fetchFields": {}
            }
        ]
    }
    ```
    </details>

    <details><summary>响应体</summary>

    ```json
    {
        "success": "成功",
        "message": "200"
    }
    ```
    </details>

3. 删除已添加的上会线索

    该功能为写待定义

4. 获取人员在办问题线索数

    原调用zjjdApi中的接口

        GET:http://ip:port/api/cbr/countzbjs

    <details><summary>请求体</summary>

    ```json
    {
                    "689754742": "安徽省案件监督承办人01",
                    "689764073": "安徽省案件监督承办人02",
                    "689770012": "安徽省案件监督承办人03",
                    "1119307109": "安徽案管室主任",
                    "1205183595": "安徽案管线索管理员1",
                    "1205197887": "安徽案管线索管理员2",
                    "34000009004": "夏延生",
                    "34000009005": "杜忠法",
                    "34000009002": "王在胜",
                    "34000009003": "楼伟成"
        }
    }
    ```

    </details>

    <details><summary>响应体</summary>

    ```json
    {
        "success": "true",
        "message": "ok",
        "data":{
            "1223234234":"120",
            "1257676766":"100"
        }
    }
    ```
    </details>

5. 线索流转功能接口

6. 删除排查会，去除会上线索的上会标记

## 对外提供接口

1. 接收推送的上会线索

        POST:http://ip:port/pz-xspch/api/xspch/jsShxs

    <details><summary>请求体</summary>

    ```json
    [
        {
            "bjbrList": [
            {
                "cGzdw": "华北电力测试",
                "cSfdwhsjsg": "2",
                "cWtxszy": "失职渎职",
                "cXm": "假时木蓉",
                "cZj": "2",
                "cZw": "某室主任"
            }
            ],
            "cAjbs": "5B12B80AB8EF43C49D15427CB1D2F412",
            "cAjly": "1",
            "cBh": "E59620246CCB45A99942D9263279A98E",
            "cCbbm": "1915247541",
            "cCbr": "1915568109",
            "cPchid": "a2978e7686aa0a47feadb6a0e9397155",
            "cXsh": "100201906318",
            "dZhgxSj": 1574391271229,
            "lcWtxsbz": "ENCRYPT#spQxck7kjFjyDWAe/VGTQw=="
        },
        {
            "bjbrList": [
            {
                "cSfdwhsjsg": "1",
                "cWtxszy": "少时诵诗书所",
                "cXm": "嗯嗯翁无"
            },
            {
                "cGzdw": "少时诵诗书所",
                "cSfdwhsjsg": "2",
                "cWtxszy": "少时诵诗书所所所",
                "cXm": "33333333",
                "cZw": "是啥"
            }
            ],
            "cAjbs": "5538c72f9d10fa0ad518b2df39729c4f",
            "cAjly": "2",
            "cBh": "E91CEC6F38314C0E87081F5B532E529C",
            "cCbbm": "1915247541",
            "cCbr": "",
            "cCzjy": "7",
            "cCzly": "一样一样",
            "cJyBlfs": "",
            "cPchid": "a2978e7686aa0a47feadb6a0e9397155",
            "cXsh": "100201906327",
            "dZhgxSj": 1574391271229,
            "lcWtxsbz": "ENCRYPT#xBYkWqxrLbWntE7LkIHBZmJdbNMQsYRx,ENCRYPT#xBYkWqxrLbWntE7LkIHBZoXnrN9QoD/AYAAs0o5swzE="
        }
    ]
    ```
    </details>

    <details><summary>响应体</summary>

    ```json
    {
        "code": 1,
        "data": "succeed",
        "message": "成功"
    }
    ```
    </details>

2. 排查会上会线索更新——处置时线索选择、切换会议

        PATCH:http://ip:port/pz-xspch/api/xspch/updateShxsxx
    调用场景：

        1.处置模块选择上会
        2.处置模块，上会线索更换排查会

    >有上会线索即更新，无则插入

    <details><summary>请求体</summary>
    TPchShxs.java
    
    ```java

    ```
    </details>

3. 处置拉取线索可选上会的会议接口

        GET:http://ip:port/pz-xspch/api/xspch/pchxx/{cbbm}

    |请求参数|参数说明|
    |---|---|
    |cbbm|承办部门|

    <details><summary>响应体</summary>

    ```json
    [
        {
            "cBh": "9390691e8a8512bc8523e45e389637dc",
            "cHydd": "会议地点",
            "cHymc": "张华清合肥线索排查会",
            "cHyzt": "4",
            "dHysj": "2019-08-29T00:00:00",
            "fetchFields": {}
        },
        {
            "cBh": "63e3491333176d887654d5f5d3ab66a2",
            "cBz": "发",
            "cHydd": "会议地点1",
            "cHymc": "排查会验证1",
            "cHyzt": "4",
            "dHysj": "2019-08-15T00:00:00",
            "fetchFields": {}
        },
        {
            "cBh": "d2a8fc6e10b89b92f339f3eb3c268c4c",
            "cBz": "修改",
            "cHydd": "清凉山",
            "cHymc": "张华卿测试",
            "cHyzt": "4",
            "dHysj": "2019-08-10T00:00:00",
            "fetchFields": {}
        },
        {
            "cBh": "9C32F2465E8746A49A77835BC3203F85",
            "cBz": "123",
            "cHydd": "紫金山",
            "cHymc": "张华卿测试2",
            "cHyzt": "5",
            "dHysj": "2019-07-30T00:00:00",
            "fetchFields": {}
        }
    ]
    ```
    </details>
    

4. 批量接收上会线索接口

        POST:http://ip:port/xspch/blym/addBatch/{pchbh}

    |请求参数|参数说明|
    |---|---|
    |pchbh|排查会编号|

    <details><summary>请求体</summary>
    List<TPchShxs>
    ```json

    ```
    </details>